{% extends 'admin/base.html.twig' %}

{% block title %}{{ t('admin_jobs_create_title', page_locale()) }} Â· Easy-Wi NextGen{% endblock %}

{% block content %}
<div class="max-w-3xl">
    <div class="mb-6">
        <h1 class="text-2xl font-semibold text-slate-900">{{ t('admin_jobs_create_title', page_locale()) }}</h1>
        <p class="text-sm text-slate-500">{{ t('admin_jobs_create_intro', page_locale()) }}</p>
    </div>

    {% if form.errors is not empty %}
        <div class="mb-6 rounded-lg border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-700">
            <p class="font-semibold mb-1">{{ t('admin_form_fix_following', page_locale()) }}</p>
            <ul class="list-disc list-inside space-y-1">
                {% for error in form.errors %}
                    <li>{{ error }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    <form method="post" action="/admin/jobs" class="space-y-5 rounded-xl border border-slate-200 bg-white p-6 shadow-sm">
        <div>
            <label class="block text-xs font-semibold text-slate-500 uppercase">{{ t('type', page_locale()) }}</label>
            <input name="type" value="{{ form.type }}" placeholder="agent.update" class="mt-2 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 text-sm">
        </div>
        <div>
            <label class="block text-xs font-semibold text-slate-500 uppercase">{{ t('admin_jobs_payload_title', page_locale()) }}</label>
            <textarea name="payload" rows="6" placeholder='{"node_id":"123"}' class="mt-2 w-full rounded-lg border border-slate-200 bg-slate-50 px-3 py-2 font-mono text-xs">{{ form.payload_raw }}</textarea>
            <p class="mt-2 text-xs text-slate-500">{{ t('admin_jobs_payload_hint', page_locale()) }}</p>
        </div>
        <div class="flex items-center gap-3">
            <button type="submit" class="rounded-lg bg-indigo-600 px-4 py-2 text-sm font-semibold text-white">{{ t('admin_jobs_create_submit', page_locale()) }}</button>
            <a href="/admin/jobs" class="rounded-lg border border-slate-200 px-4 py-2 text-sm font-medium text-slate-600">{{ t('cancel', page_locale()) }}</a>
        </div>
    </form>
</div>
{% endblock %}
